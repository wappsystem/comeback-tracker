<div id=D__ID>
    <!--third html start -->
    <div class="container mt-95">
        <!-- form container start -->
        <div class="formbox">
            <!-- form start -->
            <form id="F__ID">
                <span id=title__ID></span>
                <!-- participant name and study id -->
                <div class="formgroup">
                    <fieldset class="">
                        <div class=grid-container-1>
                                <textarea name="scanned_input" id="scanned_input__ID" style="width:98%; min-height: 400px;" class="formgroup"></textarea>
                        </div>
                    </fieldset>
                </div>
                <div class="formgroup right">
					<button type="submit" id="submit__ID" class="btn">Submit</button>
				</div>
            </form>
        </div>

    </div>
    VmInclude:__COMPONENT__/m/model.01.html
    <script>
        function F__ID() {
            //-------------------------------------
            VmInclude: '__HOST__/assets/js/form.01.js'
            //-------------------------------------
			var load = m.load;
			m.load = function () {
				load();	
                document.getElementById("scanned_input__ID").focus();

            }
            //-------------------------------------
            m.before_submit = function (data, index) {
			}
            //-------------------------------------
            m.after_insert = function (data,res){
                check_formula_input(data);
                $vm.load_module('home');
            }
            //-------------------------------------
            m.after_update = function (data,res){
                check_formula_input(data);
                //$vm.load_module('home');
            }
            //-------------------------------------
            var check_formula_input=function(data){
                console.log("after insert or update")
                var input_data=data.scanned_input.split("\n")
                console.log(JSON.stringify(input_data))
                var start_line=0; var end_line=0;
                for (var j=0;j<input_data.length;j++){
                    input_data[j]=input_data[j].replace('\r','');
                    if(input_data[j]=="START") start_line=j;
                    if(input_data[j]=="END") end_line=j;
                    console.log(start_line+' - '+end_line)
                    
                }
                for(var i=start_line+1;i<end_line;i++){
                    var line=input_data[i];
                    switch (line.substring(0,4)){
                        case 'Prod':
                            var prod=line.split(',');
                            console.log(JSON.stringify(prod))


                        break;
                    }
                }

            }
        }
    </script>
    <style>
        /*VmInclude:__HOST__/assets/css/wapp-form.css*/
    </style>
</div>